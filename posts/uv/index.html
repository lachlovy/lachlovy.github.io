<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>uv 入门指南 | Lachlovy's Blog</title>
<meta name=keywords content><meta name=description content="uv 是一个使用 Rust 编写的 Python 包和项目管理工具。"><meta name=author content><link rel=canonical href=https://lachlovy.github.io/posts/uv/><link crossorigin=anonymous href=/assets/css/stylesheet.45e028aa8ce0961349adf411b013ee39406be2c0bc80d4ea3fc04555f7f4611a.css integrity="sha256-ReAoqozglhNJrfQRsBPuOUBr4sC8gNTqP8BFVff0YRo=" rel="preload stylesheet" as=style><link rel=icon href=https://lachlovy.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://lachlovy.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://lachlovy.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://lachlovy.github.io/apple-touch-icon.png><link rel=mask-icon href=https://lachlovy.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://lachlovy.github.io/posts/uv/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.js></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/contrib/auto-render.min.js onload='renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})'></script><meta property="og:url" content="https://lachlovy.github.io/posts/uv/"><meta property="og:site_name" content="Lachlovy's Blog"><meta property="og:title" content="uv 入门指南"><meta property="og:description" content="uv 是一个使用 Rust 编写的 Python 包和项目管理工具。"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-03-10T12:50:12+08:00"><meta property="article:modified_time" content="2025-03-10T12:50:12+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="uv 入门指南"><meta name=twitter:description content="uv 是一个使用 Rust 编写的 Python 包和项目管理工具。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://lachlovy.github.io/posts/"},{"@type":"ListItem","position":2,"name":"uv 入门指南","item":"https://lachlovy.github.io/posts/uv/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"uv 入门指南","name":"uv 入门指南","description":"uv 是一个使用 Rust 编写的 Python 包和项目管理工具。","keywords":[],"articleBody":"uv 是一个使用 Rust 编写的 Python 包和项目管理工具。官网强调其 Extremely fast 的特点，比pip快10-100倍。\n安装 对于 macOS 和 Linux 系统，使用命令行安装（curl 或 wget）：\n# use curl curl -LsSf https://astral.sh/uv/install.sh | sh # use wget wget -qO- https://astral.sh/uv/install.sh | sh macOS 还可以使用 Homebrew 进行安装：\nbrew install uv 安装完成后可通过 uv help 查看基本命令。\n通过 uv 管理项目 使用命令 uv init 来创建一个文件夹为 的项目。如需指定项目名和 Python 版本，可以使用参数 --name 和 --python\n创建好项目并进入后，我们可以看到一个结构为：\ndemo-project ├── .git ├── .gitignore ├── .python-version ├── README.md ├── main.py └── pyproject.toml 的 Python 项目，uv 自动使用 Git 进行版本控制。\n.git、.gitignore：Git 版本管理文件 .python-version：当前项目使用的 Python 版本。 main.py：uv 为项目自动创建的 Python 示例脚本，可后续删除或替换为自己的 Python 脚本。 pyproject.toml：定义项目名、项目版本、Python 版本需求、依赖等信息。 安装依赖 uv 有两种方式安装依赖：\nuv add ：安装依赖并将依赖添加到项目信息中。 uv pip install ：使用当前项目 Python 环境安装 pip 包，不记录进项目信息中，只修改环境。 例如，在项目中安装 PyTorch 包，只需要运行：\nuv add torch torchvision torchaudio 执行 add 操作后，uv 会自动完善项目信息文件：\n# pyproject.toml dependencies = [ \"torch\u003e=2.6.0\", \"torchaudio\u003e=2.6.0\", \"torchvision\u003e=0.21.0\", ] # uv.lock dependencies = [ { name = \"torch\" }, { name = \"torchaudio\" }, { name = \"torchvision\" }, ] [package.metadata] requires-dist = [ { name = \"torch\", specifier = \"\u003e=2.6.0\" }, { name = \"torchaudio\", specifier = \"\u003e=2.6.0\" }, { name = \"torchvision\", specifier = \"\u003e=0.21.0\" }, ] 请注意，uv.lock 文件不应手动修改，应由 uv 来进行自动管理。\n当一个项目尝试安装本地安装过的依赖且与当前 Python 相匹配时，再次安装该依赖的速度非常快。\n移除依赖 要从项目中移除一个依赖，只需要执行命令：\nuv remove uv 会自动删除该依赖并修改项目信息，并删除其依赖的包。\n使用 运行脚本 使用 uv run ","wordCount":"842","inLanguage":"en","datePublished":"2025-03-10T12:50:12+08:00","dateModified":"2025-03-10T12:50:12+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://lachlovy.github.io/posts/uv/"},"publisher":{"@type":"Organization","name":"Lachlovy's Blog","logo":{"@type":"ImageObject","url":"https://lachlovy.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://lachlovy.github.io/ accesskey=h title="Lachlovy's Blog (Alt + H)">Lachlovy's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://lachlovy.github.io/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">uv 入门指南</h1><div class=post-meta><span title='2025-03-10 12:50:12 +0800 +0800'>March 10, 2025</span>&nbsp;·&nbsp;2 min</div></header><div class=post-content><p><a href=https://github.com/astral-sh/uv>uv</a> 是一个使用 Rust 编写的 Python 包和项目管理工具。官网强调其 <code>Extremely fast</code> 的特点，比pip快10-100倍。</p><p><img alt="uv installation speed" loading=lazy src=https://github.com/astral-sh/uv/assets/1309177/629e59c0-9c6e-4013-9ad4-adb2bcf5080d#only-light></p><h2 id=安装>安装<a hidden class=anchor aria-hidden=true href=#安装>#</a></h2><p>对于 macOS 和 Linux 系统，使用命令行安装（<code>curl</code> 或 <code>wget</code>）：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># use curl</span>
</span></span><span style=display:flex><span>curl -LsSf https://astral.sh/uv/install.sh | sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># use wget</span>
</span></span><span style=display:flex><span>wget -qO- https://astral.sh/uv/install.sh | sh
</span></span></code></pre></div><p>macOS 还可以使用 Homebrew 进行安装：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>brew install uv
</span></span></code></pre></div><p>安装完成后可通过 <code>uv help</code> 查看基本命令。</p><p><img alt=uv loading=lazy src=https://img.imgdd.com/29d8a675-326a-4b5e-acaa-9477990425f1.png></p><h3 id=通过-uv-管理项目>通过 uv 管理项目<a hidden class=anchor aria-hidden=true href=#通过-uv-管理项目>#</a></h3><p>使用命令 <code>uv init &lt;project-dir></code> 来创建一个文件夹为 <code>&lt;project-dir></code> 的项目。如需指定项目名和 Python 版本，可以使用参数 <code>--name</code> 和 <code>--python</code></p><p>创建好项目并进入后，我们可以看到一个结构为：</p><pre tabindex=0><code>demo-project
├── .git
├── .gitignore
├── .python-version
├── README.md
├── main.py
└── pyproject.toml
</code></pre><p>的 Python 项目，uv 自动使用 Git 进行版本控制。</p><ul><li><code>.git</code>、<code>.gitignore</code>：Git 版本管理文件</li><li><code>.python-version</code>：当前项目使用的 Python 版本。</li><li><code>main.py</code>：uv 为项目自动创建的 Python 示例脚本，可后续删除或替换为自己的 Python 脚本。</li><li><code>pyproject.toml</code>：定义项目名、项目版本、Python 版本需求、依赖等信息。</li></ul><h3 id=安装依赖>安装依赖<a hidden class=anchor aria-hidden=true href=#安装依赖>#</a></h3><p>uv 有两种方式安装依赖：</p><ol><li><code>uv add &lt;package></code>：安装依赖并将依赖添加到项目信息中。</li><li><code>uv pip install &lt;package></code>：使用当前项目 Python 环境安装 pip 包，不记录进项目信息中，只修改环境。</li></ol><p>例如，在项目中安装 PyTorch 包，只需要运行：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>uv add torch torchvision torchaudio
</span></span></code></pre></div><p>执行 <code>add</code> 操作后，uv 会自动完善项目信息文件：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-toml data-lang=toml><span style=display:flex><span><span style=color:#75715e># pyproject.toml</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>dependencies</span> = [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;torch&gt;=2.6.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;torchaudio&gt;=2.6.0&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;torchvision&gt;=0.21.0&#34;</span>,
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><pre tabindex=0><code># uv.lock
dependencies = [
    { name = &#34;torch&#34; },
    { name = &#34;torchaudio&#34; },
    { name = &#34;torchvision&#34; },
]

[package.metadata]
requires-dist = [
    { name = &#34;torch&#34;, specifier = &#34;&gt;=2.6.0&#34; },
    { name = &#34;torchaudio&#34;, specifier = &#34;&gt;=2.6.0&#34; },
    { name = &#34;torchvision&#34;, specifier = &#34;&gt;=0.21.0&#34; },
]
</code></pre><p><strong>请注意，<code>uv.lock</code> 文件不应手动修改，应由 uv 来进行自动管理。</strong></p><p>当一个项目尝试安装本地安装过的依赖且与当前 Python 相匹配时，再次安装该依赖的速度非常快。</p><h3 id=移除依赖>移除依赖<a hidden class=anchor aria-hidden=true href=#移除依赖>#</a></h3><p>要从项目中移除一个依赖，只需要执行命令：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>uv remove &lt;package&gt;
</span></span></code></pre></div><p>uv 会自动删除该依赖并修改项目信息，并删除其依赖的包。</p><h2 id=使用>使用<a hidden class=anchor aria-hidden=true href=#使用>#</a></h2><h3 id=运行脚本>运行脚本<a hidden class=anchor aria-hidden=true href=#运行脚本>#</a></h3><p>使用 <code>uv run &lt;script></code> 来运行 Python 代码，例如在一个 pandas 依赖的项目中运行如下代码：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># panda_version.py</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> pandas <span style=color:#66d9ef>as</span> pd
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(pd<span style=color:#f92672>.</span>__version__)
</span></span></code></pre></div><p>我们可以看到输出：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ uv run panda_version.py
</span></span><span style=display:flex><span>2.2.3
</span></span></code></pre></div><p><code>uv run</code> 的可执行文件在当前项目的 <code>.venv/bin</code> 目录下。</p><p>也可以显式激活当前虚拟环境 <code>source .venv/bin/activate</code>，激活环境后直接使用 Python：<code>python panda_version.py</code></p><h2></h2><p>PyCharm 也已支持 uv 包管理器：</p><p><img alt="Pycharm uv" loading=lazy src=https://img.imgdd.com/06467f64-f192-4702-905c-8618a674fe2c.png></p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=next href=https://lachlovy.github.io/posts/knowledge-distillation/><span class=title>Next »</span><br><span>知识蒸馏简述</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://lachlovy.github.io/>Lachlovy's Blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>